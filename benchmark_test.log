[0;34m=====================================================================[0m
[0;34m3-Way Database Performance Benchmark - Automated Test Harness[0m
[0;34m=====================================================================[0m

Configuration:
  Dataset size:    100 vectors
  Vector dims:     1024
  Iterations:      3
  Skip setup:      false
  Skip teardown:   true
  Skip PGWire:     false

[1;33m[1/5] Starting benchmark infrastructure (PostgreSQL, IRIS, PGWire)...[0m
 Network benchmarks_benchmark-net  Creating
 Network benchmarks_benchmark-net  Created
 Container iris-benchmark  Creating
 Container postgres-benchmark  Creating
 Container iris-benchmark  Created
 Container pgwire-benchmark  Creating
 Container postgres-benchmark  Created
 Container pgwire-benchmark  Created
 Container postgres-benchmark  Starting
 Container iris-benchmark  Starting
 Container iris-benchmark  Started
 Container iris-benchmark  Waiting
 Container postgres-benchmark  Started
 Container iris-benchmark  Healthy
 Container pgwire-benchmark  Starting
 Container pgwire-benchmark  Started

[1;33m[2/5] Waiting for all services to be healthy...[0m
  Waiting for PostgreSQL...
  [0;32m‚úì PostgreSQL is ready[0m
  Enabling pgvector extension...
  [0;32m‚úì pgvector extension enabled[0m
  Waiting for IRIS...
  [0;32m‚úì IRIS is ready[0m
  Resetting IRIS password...
  [0;32m‚úì IRIS password configured[0m
  Waiting for PGWire server...
  [0;32m‚úì PGWire server is ready[0m

[1;33m[3/5] Validating database connections...[0m
Validating database connections...

‚úÖ IRIS + PGWire connection successful (localhost:5432)
‚úÖ PostgreSQL + psycopg3 connection successful (localhost:5433)
‚úÖ IRIS + DBAPI connection successful (localhost:1972)

All three database methods ready for benchmarking.

[1;33m[4/5] Populating databases with test data...[0m
======================================================================
3-Way Benchmark: Test Data Setup
======================================================================
Dataset size: 100 vectors
Dimensions:   1024
Random seed:  42

üé≤ Generating 100 test vectors (1024D)...
‚úÖ Generated 100 vectors in 0.03s
   Memory: 0.39 MB

üìä Setting up PostgreSQL (localhost:5433)...
   Dropping existing table...
   Creating benchmark_vectors table (vector(1024))...
   Creating benchmark_metadata table...
   Inserting 100 vectors (batch size: 1000)...
      Progress: 100/100
   ‚úÖ Inserted 100 vectors in 0.04s
   ‚ö†Ô∏è  Dataset size (100) < 100K, skipping HNSW index
   ‚úÖ PostgreSQL setup complete: 100 vectors

üìä Setting up IRIS via PGWire (localhost:5434)...
   Dropping existing tables...
   Creating benchmark_vectors table (VECTOR(FLOAT, 1024))...
   Creating benchmark_metadata table...
   Inserting 100 vectors (individual inserts)...
      Progress: 10/100
      Progress: 20/100
      Progress: 30/100
      Progress: 40/100
      Progress: 50/100
      Progress: 60/100
      Progress: 70/100
      Progress: 80/100
      Progress: 90/100
      Progress: 100/100
   ‚úÖ Inserted 100 vectors in 1.72s
   ‚úÖ IRIS PGWire setup complete: 100 vectors

üìä Setting up IRIS via DBAPI (localhost:1974)...
   Dropping existing tables...
   Creating benchmark_vectors table (VECTOR(FLOAT, 1024))...
   Creating benchmark_metadata table...
   Inserting 100 vectors...
      Progress: 10/100
      Progress: 20/100
      Progress: 30/100
      Progress: 40/100
      Progress: 50/100
      Progress: 60/100
      Progress: 70/100
      Progress: 80/100
      Progress: 90/100
      Progress: 100/100
   ‚úÖ Inserted 100 vectors in 0.27s
   ‚úÖ IRIS DBAPI setup complete: 100 vectors

======================================================================
Setup Summary
======================================================================
postgresql           ‚úÖ Success
iris_pgwire          ‚úÖ Success
iris_dbapi           ‚úÖ Success

‚úÖ All databases setup successfully!
üìä Identical test data: 100 vectors (1024D)

[1;33m[5/5] Running 3-way benchmark...[0m
